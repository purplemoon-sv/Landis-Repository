#include <iostream>
#include <ctime>
#include <string>
#include <sstream>

using namespace std;

int main() {
    // Random Number generator
    srand(time(0));
    int randomNum = rand() % 101;
    
    // Variable for storing what the user inputs
    int guess = 0;

    // Variable for storing how many attempts have been made
    int attempt = 0;

    // Constant for defining the maximum amount of guesses
    const int maxAttempts = 10;

    cout << "Welcome to the Guess-A-Number game!\nI will pick a number between 1 and 100.\n";

    // Main game loop
    do {
        cout << "\nAttempt " << (attempt + 1) << " - Enter your guess: ";
        
        /* Read the entire line of input as a string. 
        This prevents "10 + 5" from being treated as two separate guesses. */
        string input;
        getline(cin, input); 
        
        // Use stringstream to extract the first number found in the string
        stringstream ss(input);
        if (!(ss >> guess)) { 
            // If no number could be extracted (e.g., user typed "abc")
            cout << "Invalid input! Please enter a number.";
            continue; // Restart the loop without counting an attempt
        }

        // Valid number found, increment attempt counter
        attempt++;

        // Check the guess against the random number
        if (guess == randomNum) {            
            cout << "You got it right!";
            return 0; // Exit program on success
        } else if (guess > randomNum) {
            cout << "Too high! Guess lower.\n";
            cout << "You guessed: " << guess;
        } else {
            cout << "Too low! Guess higher.\n";
            cout << "You guessed: " << guess;
        }

    } while (attempt < maxAttempts);

    // If the loop finishes without a correct guess
    cout << "\nYou Lose! The number was: " << randomNum;    return 0;
}
